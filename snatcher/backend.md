# 后端

*后端是任何 Web 系统的最后一道防线，同时也是负责前端与数据库之间数据交换的中间人。*

---

## 后端框架

在这个项目中，用于构建后端系统的框架是 `FastAPI`。

在官方文档中说道："FastAPI is a modern, fast (high-performance), web framework for building APIs with Python based on standard Python type hints".

> [!tip|label:翻译成中文]
>
> FastAPI 是一个用于构建 API 的现代、快速（高性能）的 web 框架，使用 Python 并基于标准的 Python 类型提示。

官方文档：[https://fastapi.tiangolo.com/](https://fastapi.tiangolo.com/)

## 为什么选择它作为后端框架？

在 Python 中，有许多优秀的后端框架，它们包括但不限于以下：

- **Django**：

  一个适合构建全栈项目的 Python 后端重量级框架。整个框架都围绕“开箱即用”而展开，里面包含了丰富的后端开发工具。它可以说是在 Python 中最流行、社区最大的后端框架。

  但是正是由于它包含了太多这个项目不需要的工具，然而我的这个项目本身也不算太大，如果此时引入这个框架只会增加项目的复杂度，这使得整个项目也会成为“重量级”项目。

  因此我排除了它。

- **Flask**：

  一个轻量级的 Python 后端框架。

  但是这个框架对于异步的支持度不大高，而抢课系统本身是基于异步模型展开的，所以我也将它给排除了。

- **Tornado**：

  一个专注于异步协议的轻量级 Python 后端框架。

  按理说它就是这个项目最合适的后端框架了，但是我为什么没有选择它呢？

  这个原因可能有些荒唐但又显得不这么荒唐：因为我在写这个项目的时候还没有学过这个框架😂。

在此之前我刚好学会了 FastAPI 这个框架，但还没有一个具体项目的实践，因此就阴差阳错的选择了 FastAPI 作为本项目的后端框架。

当然，FastAPI 相较于 Tornado 来说还是有许多优点的：

1. **高性能**。

   虽然该优点没有在这个项目中发挥出来，但是凭借这一点却使他在所有的 Python 后端框架中脱颖而出。

2. **丰富的社区资源**。

   在 GitHub 中，它的关注量仅次于 Django 框架。这表明它有着丰富的社区资源，遇到问题也可以快速定位并解决。

3. **标准的 Python 类型提示**。

   这点在任何一个项目中都是非常重要的，即使 Python 是一门强类型语言，但是你在声明一个变量的时候不需要明确指定变量的类型。

   这会导致什么问题呢？首先我们来看下面这个简单的例子：

   ```python
   def add(a, b):
       return a + b
   ```

   它定义了一个非常简单的函数，一般程序员都会以为这个函数实现了两个整数相加并返回结果。

   但是，在 Python 中，支持加号运算符的数据类型可不只有整型，它还包括：列表、字符串等等。

   所以这里就会对这个函数产生一个疑惑：这个函数的参数我到底该传入什么样的类型呢？函数的返回值又应该是个什么类型呢？

   > [!tip]
   >
   > 当然，你也可以编写函数说明文档来表明这个函数的意图。但我们现在有更简单的办法来解决这个问题。

   现在，让我们使用 Python 的类型提示来重写这个函数：

   ```python
   def add(a: int, b: int) -> int:
       return a + b
   ```

   如果你有 Java、C 等编程语言的基础，那么你应该能瞬间理解这个函数的意思了。

   它表示的是：你需要传入两个整型参数，最终函数会返回一个整型结果。

   且不要小看这个简单的类型提示，它在一些大型项目中发挥了至关重要的作用！

   > [!attention|label:注意]
   >
   > 但请你记住，Python 的类型提示仅仅是**提示**，它不像 C 和 Java 等编程语言具有强约束能力。也就是说即使你指定了参数的类型，但我仍然可以传入一个别的类型的对象或变量。

4. **上手难度非常小**。

   整个框架的学习成本是非常低的。在此之前，如果你接触过一些后端框架，那么我可以很明确的告诉你：你几乎可以无缝切换到 FastAPI，因为它使用起来真的太简单了！

## 在这个项目中后端的主要作用

其实后端在这个项目中发挥作用的地方就一个：向前端提供数据支持。

这个项目的前端虽然有两个部分，但它们使用的都是同一个后端服务器，这个服务器同时为两个前端提供数据支持。

具体的后端逻辑我也不在这里一一叙述了，每一个 API 的逻辑都非常简单，可以参考项目源代码进行了解。

后端源码：代码仓库下的 `./backend` 目录。